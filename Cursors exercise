BEGIN
 FOR i IN (SELECT * FROM STUDENTS) LOOP
	EXIT WHEN SQL%NOTFOUND;
	DBMS_OUTPUT.PUT_LINE(i.id || '  ' || i.NAME ||'  ' || i.stipend);
 END LOOP;
END;
/





DECLARE
ID STUDENTS.ID%TYPE;
NA STUDENTS.NAME%TYPE;
STI STUDENTS.STIPEND%TYPE;

CURSOR C IS
SELECT ID,NAME,STIPEND
FROM STUDENTS;

BEGIN
 OPEN C;
 LOOP                                         
    FETCH C INTO ID,NA,STI;
    EXIT WHEN C%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(ID || '  ' || NA || '  ' || STI);
 END LOOP;
 CLOSE C;
END;
/






  DECLARE
      NA STUDENTS.NAME%TYPE;
      STI STUDENTS.STIPEND%TYPE;
      CURSOR C  IS
      SELECT NAME,STIPEND FROM STUDENTS WHERE STIPEND < 12000;
  BEGIN
      OPEN C;
      LOOP
          FETCH C INTO NA,STI;
          EXIT WHEN C%NOTFOUND;
          DBMS_OUTPUT.PUT_LINE('Name = ' || NA || ', Salary = ' || STI);
      END LOOP;
      CLOSE C;
  END;








CREATE TABLE ACCMASTER
(Accno INT, Name VARCHAR2(30), Balance number);

CREATE TABLE ACCTRAN
(Accno INT, TDate DATE, Deb_cred varchar2(10), Amount number, Processed varchar2(10));

INSERT INTO ACCMASTER VALUES (1,'AA',50000);
INSERT INTO ACCMASTER VALUES (2,'BB',60000);
INSERT INTO ACCMASTER VALUES (3,'CC',70000);
INSERT INTO ACCMASTER VALUES (4,'DD',80000);

INSERT INTO ACCTRAN VALUES (1,'23-JUN-19','DEBIT',5000,'YES');
INSERT INTO ACCTRAN VALUES (2,'24-AUG-19','CREDIT',6000,'YES');
INSERT INTO ACCTRAN VALUES (3,'25-APR-19','DEBIT',7000,'NO');
INSERT INTO ACCTRAN VALUES (4,'26-JUL-19','CREDIT',8000,'NO');
INSERT INTO ACCTRAN VALUES (3,'27-DEC-19','CREDIT',9000,'YES');

DECLARE
 T ACCTRAN%ROWTYPE;
CURSOR T_CUR IS
SELECT * FROM ACCTRAN WHERE PROCESSED='NO';
 M ACCMASTER%ROWTYPE;
CURSOR M_CUR IS
SELECT * FROM ACCMASTER;

BEGIN
 OPEN T_CUR;
 OPEN M_CUR;
 LOOP
  FETCH T_CUR INTO T;
  FETCH M_CUR INTO M;
  EXIT WHEN T_CUR%NOTFOUND;
  IF T.DEB_CRED='DEBIT' AND T.ACCNO=M.ACCNO THEN
	M.BALANCE:=M.BALANCE-T.AMOUNT;
  ELSE
	M.BALANCE:=M.BALANCE+T.AMOUNT;
  END IF;
UPDATE ACCMASTER
SET BALANCE=M.BALANCE
WHERE ACCNO=M.ACCNO;
END LOOP;
CLOSE T_CUR;
CLOSE M_CUR;
END;
/











CREATE TABLE EMPS ( ENAME VARCHAR2(6),EMPNO NUMBER(5), SALARY NUMBER(5), DEPTNO NUMBER(5), PRIMARY KEY(EMPNO));
INSERT INTO EMPS VALUES ('AA',01,55000,01);
INSERT INTO EMPS VALUES ('BB',02,66000,01);
INSERT INTO EMPS VALUES ('CC',03,77000,02);
CREATE TABLE EMPRAISE ( EMPNO VARCHAR2(6), RAISE_DATE DATE, RAISE_AMT NUMBER);
DECLARE
 E_DATE DATE;
 DEPT NUMBER:=&DEPT;
 E_SA NUMBER;
 E_RECORD EMPS%ROWTYPE;
CURSOR E_EMP IS
(SELECT * FROM EMPS WHERE DEPTNO=DEPT);
BEGIN
 SELECT SYSDATE
 INTO E_DATE
 FROM dual;
 OPEN E_EMP;
 LOOP
  FETCH E_EMP INTO E_RECORD;
  EXIT WHEN E_EMP%NOTFOUND;
  E_SA:=E_RECORD.SALARY*0.005;
  E_RECORD.SALARY:=E_SA+E_RECORD.SALARY;
  INSERT INTO EMPRAISE VALUES (E_RECORD.EMPNO, E_DATE, E_SA);
  UPDATE EMPS
  SET SALARY =E_RECORD.SALARY
  WHERE EMPNO=E_RECORD.EMPNO;
END LOOP;
CLOSE E_EMP;
END;
/
